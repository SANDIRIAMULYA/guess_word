{% extends "base.html" %}
{% block title %}Admin Dashboard{% endblock %}
{% block content %}
  <h2>Admin Dashboard</h2>

  {# --- Show pending admin requests only for Head Admin --- #}
  {% if current_user.is_head_admin() %}
    <hr>
    <h5>Pending Admin Requests</h5>
    {% if requests %}
      <ul class="list-group mb-3">
        {% for r in requests %}
          <li class="list-group-item d-flex justify-content-between align-items-center">
            <div>
              <strong>{{ r.full_name }}</strong> â€” {{ r.email }}
            </div>
            <div>
              <form method="post" action="{{ url_for('approve_request', req_id=r.id) }}" class="d-inline">
                <button class="btn btn-sm btn-success">Approve</button>
              </form>
              <form method="post" action="{{ url_for('reject_request', req_id=r.id) }}" class="d-inline">
                <button class="btn btn-sm btn-danger">Reject</button>
              </form>
            </div>
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p class="text-muted">No pending requests.</p>
    {% endif %}
  {% endif %}

  <div class="mt-3">
    <form class="d-flex" method="post" action="{{ url_for('admin_add_word') }}">
      <input class="form-control text-uppercase" name="word" maxlength="5" placeholder="NEW word (5 letters)">
      <button class="btn btn-primary ms-2">Add Word</button>
    </form>
  </div>

  <hr>
  <h5>Saved words</h5>
  <ul class="list-group">
    {% for w in words %}
      <li class="list-group-item d-flex justify-content-between align-items-center">
        {{ w.word }}
        <form method="post" action="{{ url_for('admin_remove_word', word_id=w.id) }}">
          <button class="btn btn-sm btn-danger">Remove</button>
        </form>
      </li>
    {% endfor %}
  </ul>

  <hr>
  <h5>Reports</h5>
  <form class="row g-2" method="get" action="{{ url_for('admin_reports') }}">
    <div class="col-md-4">
      <input type="date" name="date" class="form-control">
    </div>
    <div class="col-md-3">
      <input class="form-control" name="username" placeholder="username">
    </div>
    <div class="col-auto">
      <button class="btn btn-outline-primary">Run</button>
    </div>
  </form>
  <p class="text-muted mt-2">Use date to get daily report or username to get per-user report.</p>

  <a class="btn btn-link mt-3" href="{{ url_for('admin_reports') }}">View summary reports</a>
{% endblock %}
